<!-- project detail page -->
  {% if worker in project.workers.all or user.is_superuser %}
  <div class="row">
    <div class="col-10">
      <h1>{{ project.project_name }}</h1>
    </div>
    <div class="col-2">
      {% if user.is_superuser %}
      <i class="fas fa-plus-circle mr-3" data-toggle="modal" data-target="#newTaskForm" onclick="closeMenu()" alt="{{ project.id }}" title="add new task"></i>
      <i class="fas fa-user-edit" data-toggle="modal" data-target="#newProjectWorkersForm" title="edit project workers" alt="{{ project.id }}"></i>
      {% endif %}
    </div>
  </div>
  <hr class="my-3">
  <div class="container z-depth-5 text-justify cyan lighten-5 p-3 m-auto">{{ project.summary|safe }}</div>
  <!-- task block -->
  <div class="p-1 mt-3 grey" id="task-content">
    {% for task in task_list %}
    {% if not task.is_completed %}
    <!-- if task is not completed -->
    <div class="p-1 m-3 white">
      <div class="row align-items-center success-color-dark p-3 m-3">
        <div class="col-7 p-3 created_on warning-color">
          <a title="{{ task.title }}" data-toggle="collapse" data-target="#summary{{ task.id }}">
            <span>{{ task.title }}</span>
          </a>
        </div>
        <div class="col-4 created_on">
          {% if user.is_superuser %}
          <i class="far fa-window-close mr-5 p-2" title="close the task" alt="{{ task.id }}"></i>
          {% endif %}
          {% if task.is_available == True %}
          <div class="row">
            <div class="p-2 col-xs-12 col-sm-4"><i class="fas fa-sync more" alt="{{ task.id }}" title="synchronize"></i></div>
            {% if not task.is_active %}
            <div class="p-2 col-xs-12 col-sm-4 task_status" id="task_status{{ task.id }}">
              <i class="far fa-check-square" title="start" alt="{{ task.id }}"></i>
            </div>
            {% elif worker == task.worker %}
            <div class="p-2 col-xs-12 col-sm-4 task_status" id="task_status{{ task.id }}">
              <i class="far fa-pause-circle" title="end" alt="{{ task.id }}"></i>
            </div>
            {% else %}
            <div class="p-2 col-xs-12 col-sm-4 task_status">
              <i class="fas fa-lock" title="active"></i>
            </div>
            {% endif %}
            <div class="p-2 col-xs-12 col-sm-4">
              <i class="far fa-plus-square" id="{{ task.id }}" title="add comment"></i>
            </div>
          </div>
          {% else %}
          <div class="col">
            <h5>The task is unavailable</h5>
          </div>
          {% endif %}
        </div>
        <div class="col-1 created_on">
          <i class="fas p-1 fa-user-clock" alt="{{ task.id }}" title="estimated time"><span class="time-block p-1 created_on"> {{ task.estimated_time }}</span></i>
        </div>
        <div class="text-center col-12 m-1">
          <div id="summary{{ task.id }}" class="collapse">
            <div class="container-fluid grey lighten-2 p-1">
              <div class="row white m-1">
                <div class="col-12 summary-content text-justify p-3" contenteditable="true" id="content{{ task.id }}">{{ task.description|safe }}</div>
                <div class="col m-1 p-1"><i class="fas fa-save" title="save" alt="{{ task.id }}"></i></div>
              </div>
              <div class="row orange accent-1">
                <div class="col-3 created_on">Created: {{ task.date_of_start }}</div>
                <div class="col-3 created_on">Priority: {{ task.get_priority_of_task_display }}</div>
                <div class="col-3 created_on">Type: {{ task.get_type_of_task_display }}</div>
                {% if task.worker %}
                <div class="col-3 task_worker created_on" id="task_worker{{ task.id }}">Worker: {{ task.worker }}</div>
                {% else %}
                <div class="col-3 task_worker created_on" id="task_worker{{ task.id }}">Worker: the task is free</div>
                {% endif %}
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="row created_on">
        <div class="col-12 warning-color created_on m-1 p-1">
          Available from: {{ task.available_from }} to: {{ task.available_to }}
        </div>
      </div>
      {% if task.is_available == True %}
      <div class="silver border border-warning p-1 m-2 text-center" id="more{{ task.id }}">
        <h5>To load comments, just click on the sync button</h5>
      </div>
      {% endif %}
    </div>
    <!-- end is not completed -->
    {% else %}
    <!-- if task is completed -->
    <div class="p-1 m-3 white">
      <div class="row align-items-center teal lighten-4 p-3 m-3">
        <div class="col-12 p-3 unique-color">
          <div class="row">
            <div class="col-11 created_on">
              <a title="completed" data-toggle="collapse" data-target="#summary{{ task.id }}"><span>{{ task.title }}</span></a>
            </div>
            <div class="col-1 mr-auto created_on">
              {% if user.is_superuser %}
              <i class="far fa-calendar-plus mr-3" title="open the task again" alt="{{ task.id }}"></i>
              <i class="fas fa-trash" title="to trash" alt="{{ task.id }}"></i>
              {% else %}
              <i class="far fa-calendar-check m-1"></i>
              {% endif %}
            </div>
          </div>
        </div>
        <div class="text-center col-12 m-1">
          <div id="summary{{ task.id }}" class="collapse">
            <div class="container-fluid grey lighten-2 p-1">
              <div class="row white m-1">
                <div class="col-12 text-justify">{{ task.description|safe }}</div>
              </div>
              <div class="row orange accent-1">
                <div class="col-12">End date: {{ task.date_of_end }}</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- end is completed -->
    {% endif %}
    {% endfor %}
  </div>
  <!-- end task block -->
  {% endif %}
<!-- end project detail block -->

  <!-- modal form to add a new comment for task -->
  <div class="modal fade" id="modalCommentForm" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <form id="comment-form" action="" method="POST">
          {% csrf_token %}
          <div class="modal-header text-center">
            <h4 class="modal-title w-100 font-weight-bold">Add comment</h4>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body mx-3">
            <div class="md-form mb-5">
              <textarea type="text" id="comments" name="comment" class="form-control md-textarea" required="required"></textarea>
              <label data-error="wrong" data-success="right" for="comments">Your comments</label>
              <div id="hide" title=""></div>
            </div>
          </div>
          <div class="modal-footer d-flex justify-content-center">
            <button type="submit" class="btn btn-default">Save</button>
          </div>
        </form>
      </div>
    </div>
  </div>
  <!-- endform -->

  <!-- modal form to show timelogs of task -->
  <div class="modal fade right" id="timeLogForm" tabindex="-1" role="dialog" aria-labelledby="mytimeLogForm" aria-hidden="true">
    <div class="modal-dialog modal-full-height modal-right" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title w-100" id="mytimeLogForm">Time logs</h4>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <div class="row justify-content-center align-items-center" id="time-logs">
          </div>
          <div class="modal-footer justify-content-center mt-3">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- endform -->
